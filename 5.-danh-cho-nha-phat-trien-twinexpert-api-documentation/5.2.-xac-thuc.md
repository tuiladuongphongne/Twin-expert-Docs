---
description: TwinExpert API sử dụng API key để xác thực requests
---

# 5.2. Xác thực

{% hint style="danger" %}
#### Bảo mật API Key

API key của bạn có quyền truy cập vào dữ liệu. Hãy giữ bí mật và không chia sẻ trong code phía client.
{% endhint %}

### Cách sử dụng API Key

Thêm API key vào header Authorization của mọi request:

#### <kbd>**Authorization Header**</kbd>

```
Authorization: Bearer YOUR_API_KEY
```

<kbd>**Hoặc sử dụng X-API-Key header**</kbd>

```
X-API-Key: YOUR_API_KEY
```

{% columns %}
{% column width="8.333333333333332%" %}
**Post**
{% endcolumn %}

{% column %}
```
/api/v1/auth/api-keys
```
{% endcolumn %}
{% endcolumns %}

***

#### <>Ví dụ code

Tạo API key mới bằng JWT token

{% tabs %}
{% tab title="JavaScript" %}
```javascript
// Tạo API key mới
const response = await fetch('https://api.twinexpert.com/api/v1/auth/api-keys', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_JWT_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: 'My App',
    scope: 'full_access'
  })
});

const data = await response.json();
console.log('API Key:', data.data.key);
```
{% endtab %}

{% tab title="cURL" %}
```python
# Tạo API key mới
curl -X POST "https://api.twinexpert.com/api/v1/auth/api-keys" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "My App",
    "scope": "full_access"
  }'
```
{% endtab %}

{% tab title="Python" %}
```ruby
import requests

# Tạo API key mới
headers = {
    'Authorization': 'Bearer YOUR_JWT_TOKEN',
    'Content-Type': 'application/json'
}

data = {
    'name': 'My App',
    'scope': 'full_access'
}

response = requests.post(
    'https://api.twinexpert.com/api/v1/auth/api-keys',
    headers=headers,
    json=data
)

api_key = response.json()['data']['key']
print(f'API Key: {api_key}')
```
{% endtab %}
{% endtabs %}

***

#### Phạm vi quyền (Scopes)

<table data-view="cards"><thead><tr><th></th><th><select multiple><option value="F2ILH8xhc3IA" label="Xem danh sách Twins" color="blue"></option><option value="IuhcC1wXOPs5" label="Đọc thông tin cuộc trò chuyên" color="blue"></option><option value="WEaJi0oWlhuE" label="Xem lịch sử tin nhắn" color="blue"></option><option value="gJv4yKk0HOiS" label="200 requests/giờ" color="blue"></option><option value="xKPZKha730cm" label="Tất cả quyền của Read_only" color="blue"></option><option value="8dUJ3p94k15o" label="Tạo cuộc trò chuyện mới" color="blue"></option><option value="oXKw3ww0BcIK" label="Gửi tin nhắn" color="blue"></option><option value="V9q9VhCnNyjV" label="500 requests/giờ" color="blue"></option></select></th></tr></thead><tbody><tr><td><sub><mark style="background-color:$info;">read_only</mark></sub>  <kbd><mark style="color:$primary;background-color:$info;"><strong>Chỉ Đọc</strong></mark></kbd></td><td><span data-option="F2ILH8xhc3IA">Xem danh sách Twins, </span><span data-option="IuhcC1wXOPs5">Đọc thông tin cuộc trò chuyên, </span><span data-option="WEaJi0oWlhuE">Xem lịch sử tin nhắn, </span><span data-option="gJv4yKk0HOiS">200 requests/giờ</span></td></tr><tr><td><sub><mark style="background-color:blue;">full_access</mark></sub><kbd><mark style="color:$primary;background-color:$info;"><strong>Chỉ Đọc</strong></mark></kbd></td><td><span data-option="xKPZKha730cm">Tất cả quyền của Read_only, </span><span data-option="8dUJ3p94k15o">Tạo cuộc trò chuyện mới, </span><span data-option="oXKw3ww0BcIK">Gửi tin nhắn, </span><span data-option="V9q9VhCnNyjV">500 requests/giờ</span></td></tr></tbody></table>
